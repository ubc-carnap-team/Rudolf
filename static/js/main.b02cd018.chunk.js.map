{"version":3,"sources":["util/nodes.ts","RudolfReducer.ts","styles/App_styles.ts","styles/feedback_styles.ts","util/carnapAdapter.ts","components/PremiseInput.tsx","components/RudolfFeedback.tsx","components/NodeMenu.tsx","styles/NodeView_styles.ts","components/StyledAutosizeInput.tsx","components/FormulaView.tsx","components/CustomTooltip.tsx","components/NodeView.tsx","components/TruthTree.tsx","util/helpers.ts","components/DebugInfo.tsx","components/Rudolf.tsx","undoableReducer.ts","serviceWorker.ts","index.tsx","lib.ts"],"names":["makeNode","formulas","forest","nodeType","id","destructivelyAppendChildren","root","createNodes","length","forEach","child","console","warn","parsePremises","map","form","idx","makeTreeForm","value","row","resolved","isOpenLeaf","node","firstRow","makeEmptyFormulas","n","nextRow","arr","push","getNode","nodePath","split","char","Number","Error","convertIdToPath","currentNode","isFormulaNode","RudolfReducer","nodeId","formulaIndex","newValue","this","draftState","tree","nodeRow","justification","Object","assign","justifications","contradictoryRows","index","draftNode","premiseArray","formulaCount","rule","parentRow","parentId","ImmerReducer","rudolfReducer","createReducerFunction","createActionCreators","continueBranch","createTree","markContradiction","markFinished","reopenBranch","splitBranch","toggleResolved","updateContradiction","updateFormula","updateJustification","appJSS","createUseStyles","AppBounder","color","fontSize","display","flexDirection","alignItems","margin","fontFamily","minWidth","TopItemsBounder","TreeBounder","borderStyle","minHeight","borderWidth","borderRadius","height","width","backgroundColor","maxWidth","overflowX","feedbackJSS","Correct","borderColor","Incorrect","convertToSequent","newFormulas","previousFormulas","concat","label","convertFormulas","validRow","formulasInOrder","rearrangeFormulas","filter","row1","row2","every","includes","sort","a","b","form1","form2","contradictionSequent","processFeedback","sequentRoot","feedbackRoot","feedbackMap","rec","sequent","feedbackNode","parentFeedback","extractMessage","childSequent","class","info","checkSequent","checker","Promise","resolve","reject","result","error","checkTree","feedback","forms","mainFormulaRow","findIndex","mainFormula","formulasWithoutMain","slice","join","maybeRow","translateFeedback","feedbackMessages","toLocaleUpperCase","PremiseInput","onSubmit","premises","setPremises","event","preventDefault","type","name","aria-label","onChange","target","className","RudolfFeedback","treeState","href","encodeURIComponent","JSON","stringify","style","alignSelf","Feedback","NodeMenu","open","dispatch","anchorEl","close","onClose","formula","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","zIndex","MenuItem","onClick","nodeviewJSS","TruthTree","padding","gridTemplateColumns","placeItems","columnGap","rowGap","RowNumber","gridColumn","Justification","NodeViewContainer","NodeView","textAlign","FormulaBounder","Tooltip","StyledAutosizeInput","placeholder","inputStyle","FormulaView","useState","contextMenu","setContextMenu","ref","useRef","gridRow","onContextMenu","e","currentTarget","current","Check","CustomTooltip","withStyles","tooltip","props","classes","feedbackClasses","feedbackInfo","feedbackClass","gridTemplateRows","title","relations","targetId","targetAnchor","sourceAnchor","key","rows","range","start","stop","success","errorMessage","undefined","keys","rowString","marginRight","jsonviewJSS","Bounder","position","bottom","TextArea","overflow","Toggle","cursor","DebugInfo","setOpen","TextareaAutosize","rowsMax","maxHeight","Rudolf","innerReducer","initialPremises","debug","setFeedback","useReducer","action","past","present","future","previous","next","distantFuture","initialState","pastStates","futureStates","checkerFunction","window","Carnap","useEffect","then","catch","message","topItemsRef","rawInput","IconButton","disabled","Undo","Redo","arrowLength","svgContainerStyle","strokeColor","noCurves","Boolean","location","hostname","match","elementId","ReactDOM","render","React","createElement","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b02cd018.chunk.js","sourcesContent":["import {\n  ContradictionNode,\n  FinishedNode,\n  FormulaNode,\n  NodeGenerator,\n  OpenLeafNode,\n  TreeForm,\n  TreeNode,\n} from '../typings/TreeState'\nimport { isNonEmptyArray } from './util'\n\nexport const makeNode = ({\n  formulas = [],\n  forest = [],\n  id,\n}: Partial<FormulaNode> & {\n  id: string\n}): FormulaNode => {\n  return {\n    nodeType: 'formulas',\n    formulas,\n    forest,\n    id,\n  }\n}\n\nexport const makeContradictionNode = (parentId: string): ContradictionNode => ({\n  nodeType: 'contradiction',\n  formulas: [],\n  contradictoryRows: '',\n  id: `${parentId}0`,\n})\n\nexport const makeFinishedNode = (parentId: string): FinishedNode => ({\n  nodeType: 'finished',\n  formulas: [],\n  id: `${parentId}0`,\n})\n\n/**\n *\n * @param root The root of a subTree\n * @param createNodes function that creates new node objects\n */\nexport const destructivelyAppendChildren = (\n  root: TreeNode,\n  createNodes: NodeGenerator\n): void => {\n  if (root.nodeType === 'contradiction') {\n    return\n  } else if (root.nodeType === 'finished') {\n    // TODO: Special Handling for FinishedNodes?\n    console.warn(\"shouldn't try to append to finished branch\")\n    return\n  } else if (root.forest.length === 0) {\n    root.forest = createNodes(root.id)\n  } else {\n    root.forest.forEach((child) =>\n      destructivelyAppendChildren(child, createNodes)\n    )\n  }\n}\n\n/**\n *\n * @param formulas an array of of formulas.\n */\nexport const parsePremises = (formulas: string[]): FormulaNode => {\n  return makeNode({\n    formulas: formulas.map((form, idx) => makeTreeForm(form, idx + 1)),\n    forest: [],\n    id: '',\n  })\n}\n\nconst makeTreeForm = (value = '', row: number): TreeForm => ({\n  value,\n  resolved: false,\n  row,\n})\n\nexport const isOpenLeaf = (node: TreeNode | null): node is OpenLeafNode =>\n  node != null && node.nodeType === 'formulas' && node.forest.length === 0\n\nexport const lastRow = (node: FormulaNode) =>\n  firstRow(node) + node.formulas.length\n\nexport const firstRow = (node: FormulaNode) => node.formulas[0].row\n\nexport const makeEmptyFormulas = (n: number, nextRow: number): TreeForm[] => {\n  const arr = []\n  while (n-- > 0) {\n    arr.push(makeTreeForm('', nextRow++))\n  }\n  return arr\n}\n\nexport const convertIdToPath = (id: string): (0 | 1)[] =>\n  id.split('').map((char: string) => {\n    if (char === '0' || char === '1') {\n      return Number(char) as 0 | 1\n    } else {\n      throw new Error(`invalid character in node id: ${char} in ${id}`)\n    }\n  })\n\nexport const getNode = (root: FormulaNode, id: string): TreeNode => {\n  const nodePath: (0 | 1)[] = convertIdToPath(id)\n  let currentNode: TreeNode = root\n  for (const idx of nodePath) {\n    if (currentNode.nodeType !== 'formulas') {\n      throw new Error('Failed to get node path')\n    }\n    currentNode = currentNode.forest[idx]\n  }\n  return currentNode\n}\n\nexport const isNonLeafNode = (\n  node: TreeNode\n): node is FormulaNode & { forest: FormulaNode[] } =>\n  isFormulaNode(node) &&\n  isNonEmptyArray(node.forest) &&\n  node.forest[0]?.nodeType === 'formulas'\n\nexport const isFormulaNode = (node: TreeNode): node is FormulaNode =>\n  node.nodeType === 'formulas'\n","import {\n  Actions,\n  createActionCreators,\n  createReducerFunction,\n  ImmerReducer,\n  ImmerReducerFunction,\n} from 'immer-reducer'\nimport { Dispatch } from 'react'\n\nimport {\n  FormulaNode,\n  Justification,\n  JustificationMap,\n} from './typings/TreeState'\nimport {\n  destructivelyAppendChildren,\n  getNode,\n  makeContradictionNode,\n  makeEmptyFormulas,\n  makeFinishedNode,\n  makeNode,\n  parsePremises,\n} from './util/nodes'\n\nexport type RudolfStore = {\n  tree: FormulaNode\n  nextRow: number\n  justifications: JustificationMap\n}\n\nexport class RudolfReducer extends ImmerReducer<RudolfStore> {\n  updateFormula(nodeId: string, formulaIndex: number, newValue: string) {\n    const draftNode = getNode(this.draftState.tree, nodeId)\n    draftNode.formulas[formulaIndex].value = newValue\n  }\n\n  updateJustification(nodeRow: number, justification: Partial<Justification>) {\n    Object.assign(this.draftState.justifications[nodeRow], justification)\n  }\n\n  updateContradiction(id: string, contradictoryRows: string) {\n    Object.assign(getNode(this.draftState.tree, id), { contradictoryRows })\n  }\n\n  toggleResolved(nodeId: string, index: number) {\n    const draftNode = getNode(this.draftState.tree, nodeId)\n    draftNode.formulas[index].resolved = !draftNode.formulas[index].resolved\n  }\n\n  createTree(premiseArray: string[]) {\n    this.draftState.tree = parsePremises(premiseArray)\n    this.draftState.nextRow = premiseArray.length + 1\n    this.draftState.justifications = {}\n  }\n\n  continueBranch(nodeId: string, formulaCount: number) {\n    const draftNode = getNode(this.draftState.tree, nodeId)\n    destructivelyAppendChildren(draftNode, (id) => [\n      makeNode({\n        id: `${id}0`,\n        formulas: makeEmptyFormulas(formulaCount, this.draftState.nextRow),\n      }),\n    ])\n\n    this.draftState.justifications[this.draftState.nextRow] = {\n      rule: '',\n      parentRow: '',\n    }\n    this.draftState.nextRow += formulaCount\n  }\n\n  splitBranch(nodeId: string, formulaCount: number) {\n    const draftNode = getNode(this.draftState.tree, nodeId)\n    destructivelyAppendChildren(draftNode, (id) => {\n      const formulas = makeEmptyFormulas(formulaCount, this.draftState.nextRow)\n      return [\n        makeNode({\n          id: `${id}0`,\n          formulas,\n        }),\n        makeNode({\n          id: `${id}1`,\n          formulas,\n        }),\n      ]\n    })\n    this.draftState.justifications[this.draftState.nextRow] = {\n      rule: '',\n      parentRow: '',\n    }\n    this.draftState.nextRow += formulaCount\n  }\n\n  markContradiction(nodeId: string) {\n    const draftNode = getNode(this.draftState.tree, nodeId) as FormulaNode\n    draftNode.forest = [makeContradictionNode(draftNode.id)]\n  }\n\n  markFinished(nodeId: string) {\n    const draftNode = getNode(this.draftState.tree, nodeId) as FormulaNode\n    draftNode.forest = [makeFinishedNode(nodeId)]\n  }\n\n  reopenBranch(nodeId: string) {\n    const draftNode = getNode(this.draftState.tree, nodeId) as FormulaNode\n    draftNode.forest = []\n  }\n}\n\nexport const initialState = (premises: string): RudolfStore => {\n  const premiseArray = premises.split(',')\n  return {\n    tree: parsePremises(premiseArray),\n    nextRow: premiseArray.length + 1,\n    justifications: {},\n  }\n}\n\nexport const rudolfReducer: ImmerReducerFunction<typeof RudolfReducer> = createReducerFunction(\n  RudolfReducer\n)\n\nexport const {\n  continueBranch,\n  createTree,\n  markContradiction,\n  markFinished,\n  reopenBranch,\n  splitBranch,\n  toggleResolved,\n  updateContradiction,\n  updateFormula,\n  updateJustification,\n} = createActionCreators(RudolfReducer)\nexport type RudolfAction = Actions<typeof RudolfReducer>\nexport type CustomDispatch = Dispatch<RudolfAction>\n","import { createUseStyles } from 'react-jss'\n\nconst appJSS = createUseStyles({\n  AppBounder: {\n    color: 'black',\n    fontSize: 'calc(8px + 1.5vmin)',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    margin: '1em',\n    fontFamily: 'Fira Logic',\n    minWidth: '35vw',\n  },\n\n  TopItemsBounder: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n\n  TreeBounder: {\n    borderStyle: 'solid',\n    minWidth: '30vw',\n    minHeight: '30vw',\n    borderWidth: '.1em',\n    borderRadius: '.2em',\n    '&::-webkit-scrollbar': {\n      height: '6px',\n      width: '6px',\n    },\n    '&::-webkit-scrollbar-thumb': {\n      backgroundColor: 'black',\n    },\n    maxWidth: '80vw',\n    overflowX: 'scroll',\n  },\n})\n\nexport default appJSS\n","import { createUseStyles } from 'react-jss'\n\nconst feedbackJSS = createUseStyles({\n  Correct: {\n    borderColor: 'green',\n  },\n\n  Incorrect: {\n    borderColor: 'red',\n  },\n})\n\nexport default feedbackJSS\n","import {\n  FeedbackMap,\n  FeedbackNode,\n  SequentNode,\n  FeedbackMessage,\n  Checker,\n} from '../typings/Checker'\nimport { FormulaNode, JustificationMap, TreeForm } from '../typings/TreeState'\nimport { firstRow } from './nodes'\n\nexport const convertToSequent = (\n  { formulas: newFormulas, forest, id }: FormulaNode,\n  justifications: JustificationMap,\n  previousFormulas: TreeForm[] = []\n): SequentNode => {\n  const formulas = previousFormulas.concat(newFormulas)\n  if (forest.length === 0) {\n    return { label: convertFormulas(formulas), rule: '', forest: [], id }\n  } else {\n    const [child] = forest\n    if (child.nodeType === 'formulas') {\n      const justification = justifications[firstRow(child)]\n      const { rule } = justification\n      const parentRow = Number(justification.parentRow)\n      if (!validRow(parentRow)) {\n        throw new Error(\n          `Cited row must be a positive integer. Got \"${parentRow}\"`\n        )\n      }\n      if (parentRow >= firstRow(child)) {\n        throw new Error(\n          `Row cited (${parentRow}) must be less than current row (${firstRow(\n            child\n          )}).`\n        )\n      }\n      const formulasInOrder = rearrangeFormulas(formulas, parentRow)\n      return {\n        label: convertFormulas(formulas),\n        rule: 'St',\n        forest: [\n          {\n            label: convertFormulas(formulasInOrder),\n            rule,\n            id,\n            forest: forest.map((node) =>\n              convertToSequent(\n                node as FormulaNode,\n                justifications,\n                formulasInOrder.filter((form) => !form.resolved)\n              )\n            ),\n          },\n        ],\n      }\n    } else if (child.nodeType === 'contradiction') {\n      // We expect parentRow to be \"<number>,<number>\"\n      const [row1, row2] = child.contradictoryRows.split(',').map(Number)\n      if (![row1, row2].every(validRow)) {\n        throw new Error(\n          `Contradiction must cite 2 rows, separated by a comma. Got \"${child.contradictoryRows}\"`\n        )\n      }\n      const [form1, form2] = formulas\n        .filter((form) => [row1, row2].includes(form.row))\n        // this sort is a hack to avoid parsing for negation symbol, which may vary\n        .sort((a, b) => b.value.length - a.value.length)\n      if (!(form1 && form2)) {\n        throw new Error('Contradiction cites non-existent row')\n      }\n      const contradictionSequent: string = convertFormulas([\n        ...formulas.filter((form) => ![row1, row2].includes(form.row)),\n        form1,\n        form2,\n      ])\n      return {\n        label: convertFormulas(formulas),\n        rule: 'St',\n        id,\n        forest: [\n          {\n            label: contradictionSequent,\n            rule: 'Ax',\n            id: child.id,\n            forest: [{ label: '', rule: '', forest: [] }],\n          },\n        ],\n      }\n    } else if (child.nodeType === 'finished') {\n      return {\n        label: convertFormulas(formulas),\n        rule: 'St',\n        id,\n        forest: [\n          {\n            label: convertFormulas(formulas),\n            rule: 'Lit',\n            id: child.id,\n            forest: [\n              {\n                label: '',\n                rule: '',\n                forest: [],\n              },\n            ],\n          },\n        ],\n      }\n    } else {\n      throw new Error('this was supposed to be exhaustive')\n    }\n  }\n}\n\nexport const processFeedback = (\n  sequentRoot: SequentNode,\n  feedbackRoot: FeedbackNode\n): FeedbackMap => {\n  const feedbackMap: FeedbackMap = {}\n  if (sequentRoot.forest.length) {\n    // close over (mutable) feedback map for recursive calls\n    const rec = (\n      sequent: SequentNode,\n      feedbackNode: FeedbackNode,\n      parentFeedback: FeedbackMessage\n    ): void => {\n      // detect dummy nodes inserted to pad tree\n      if (typeof sequent.id === 'string') {\n        if (sequent.rule === 'Ax' || sequent.rule === 'Lit') {\n          feedbackMap[sequent.id] = extractMessage(feedbackNode)\n          return\n        } else {\n          feedbackMap[sequent.id] = parentFeedback\n          sequent.forest.forEach((childSequent, idx) => {\n            rec(\n              childSequent,\n              feedbackNode.forest[idx],\n              extractMessage(feedbackNode)\n            )\n          })\n        }\n      } else {\n        sequent.forest.forEach((childSequent, idx) => {\n          rec(childSequent, feedbackNode.forest[idx], parentFeedback)\n        })\n      }\n    }\n    // recursive call\n    rec(sequentRoot, feedbackRoot, {\n      class: 'correct',\n      info: 'Assumptions',\n    })\n  }\n  return feedbackMap\n}\n\n// Promisified checker\nconst checkSequent = async (\n  sequent: SequentNode,\n  checker: Checker\n): Promise<FeedbackNode> => {\n  return new Promise((resolve, reject) => {\n    try {\n      checker(sequent, (result: FeedbackNode) => {\n        resolve(result)\n      })\n    } catch (error) {\n      reject(error)\n    }\n  })\n}\n\nexport const checkTree = async (\n  tree: FormulaNode,\n  justifications: JustificationMap,\n  checker: Checker\n): Promise<{ sequent: SequentNode; feedback: FeedbackMap }> => {\n  const sequent = convertToSequent(tree, justifications)\n  console.info(sequent)\n  const feedback: FeedbackNode = await checkSequent(sequent, checker)\n  return {\n    sequent,\n    feedback: processFeedback(sequent, feedback),\n  }\n}\n\nconst rearrangeFormulas = (\n  forms: TreeForm[],\n  mainFormulaRow: number\n): TreeForm[] => {\n  const idx = forms.findIndex((form) => form.row === mainFormulaRow)\n  const mainFormula = forms[idx]\n  const formulasWithoutMain = forms.slice(0, idx).concat(forms.slice(idx + 1))\n  const newList = [...formulasWithoutMain, mainFormula]\n  return newList\n}\n\nconst convertFormulas = (forms: TreeForm[]) =>\n  forms\n    .map(({ value }) => value)\n    .join(',')\n    .concat(':|-:')\n\nconst validRow = (maybeRow: number): boolean => maybeRow > 0\n\n// returns the non-recursive properties of the FeedbackNode\nconst extractMessage = ({\n  forest,\n  ...feedback\n}: FeedbackNode): FeedbackMessage => translateFeedback(feedback)\n\nconst feedbackMessages: { [message: string]: string } = {\n  'WRONG NUMBER OF PREMISES': 'Wrong number of branches.',\n  \"THIS DOESN'T FOLLOW BY THIS RULE\": 'Incorrect use of resolution rule.',\n}\n\nconst translateFeedback = (feedback: FeedbackMessage): FeedbackMessage => ({\n  ...feedback,\n  info: feedbackMessages[feedback.info.toLocaleUpperCase()] ?? feedback.info,\n})\n","import React, { FormEventHandler } from 'react'\n\ntype Props = {\n  onSubmit: (premises: string) => void\n  premises: string\n  setPremises: (premises: string) => void\n}\n\nconst PremiseInput: React.FC<Props> = ({ onSubmit, premises, setPremises }) => {\n  const handleSubmit: FormEventHandler<HTMLFormElement> = (event) => {\n    event.preventDefault()\n    onSubmit(premises)\n  }\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        name=\"premises\"\n        aria-label=\"Enter Premises\"\n        value={premises}\n        width={'50%'}\n        onChange={(event) => setPremises(event.target.value)}\n      />\n      <button className=\"submit-premises\" type=\"submit\">\n        Declare Premises\n      </button>\n    </form>\n  )\n}\n\nexport default PremiseInput\n","import { Feedback } from '@material-ui/icons'\nimport React from 'react'\n\nimport { RudolfStore } from '../RudolfReducer'\n\ntype Props = { treeState: RudolfStore }\n\nconst RudolfFeedback: React.FC<Props> = (treeState) => (\n  <a\n    href={`mailto:phil.logic.ubc@gmail.com?subject=${encodeURIComponent(\n      `USER FEEDBACK - `\n    )}&body=${encodeURIComponent(\n      `DESCRIBE YOUR PROBLEM OR SUGGESTION HERE \\n\\n\\n\\n${JSON.stringify(\n        treeState\n      )}`\n    )}`}\n    style={{ alignSelf: 'flex-end' }}\n  >\n    feedback\n    <Feedback></Feedback>\n  </a>\n)\n\nexport default RudolfFeedback\n","import { Menu, MenuItem } from '@material-ui/core'\nimport React, { FC } from 'react'\n\nimport {\n  CustomDispatch,\n  toggleResolved,\n  continueBranch,\n  splitBranch,\n  markContradiction,\n  markFinished,\n  reopenBranch,\n} from '../RudolfReducer'\nimport { TreeNode } from '../typings/TreeState'\nimport { isOpenLeaf } from '../util/nodes'\n\ntype Props = {\n  onClose: () => void\n  open: boolean\n  index: number\n  node: TreeNode\n  anchorEl: Element\n  dispatch: CustomDispatch\n}\n\n/**\n * @TODO make context menu work for each of\n * - Formula Node:\n *   - branch commands\n *\n * - Contradiction/Finished node:\n *   - Reopen.\n * - Formula:\n *   - branch commands\n *   - (un)resolve\n *   - close branch.\n */\n\nexport const NodeMenu: FC<Props> = ({\n  open,\n  dispatch,\n  index,\n  anchorEl,\n  onClose: close,\n  node,\n}) => {\n  const formula = node.formulas[index]\n  return (\n    <Menu\n      open={open}\n      getContentAnchorEl={null}\n      anchorEl={anchorEl}\n      onClose={close}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'center',\n      }}\n      style={{ zIndex: 2000 }}\n    >\n      <MenuItem\n        onClick={() => {\n          dispatch(continueBranch(node.id, 1))\n          close()\n        }}\n      >\n        Continue Branch w/ 1 formula\n      </MenuItem>\n      <MenuItem\n        onClick={() => {\n          dispatch(splitBranch(node.id, 1))\n          close()\n        }}\n      >\n        Split Branch w/ 1 formula\n      </MenuItem>\n      <MenuItem\n        onClick={() => {\n          dispatch(continueBranch(node.id, 2))\n          close()\n        }}\n      >\n        Continue Branch w/ 2 formulas\n      </MenuItem>\n      <MenuItem\n        onClick={() => {\n          dispatch(splitBranch(node.id, 2))\n          close()\n        }}\n      >\n        Split Branch w/ 2 formulas\n      </MenuItem>\n      <MenuItem\n        onClick={() => {\n          dispatch(toggleResolved(node.id, index))\n          close()\n        }}\n      >\n        Mark as {formula.resolved ? 'Un' : ''}Resolved\n      </MenuItem>\n      {isOpenLeaf(node) && (\n        <MenuItem\n          onClick={() => {\n            dispatch(markContradiction(node.id))\n            close()\n          }}\n        >\n          Close Branch With Contradiction\n        </MenuItem>\n      )}\n      {isOpenLeaf(node) && (\n        <MenuItem\n          onClick={() => {\n            dispatch(markFinished(node.id))\n            close()\n          }}\n        >\n          Mark Branch Finished\n        </MenuItem>\n      )}\n      {node.nodeType === 'contradiction' && (\n        <MenuItem\n          onClick={() => {\n            dispatch(reopenBranch(node.id))\n            close()\n          }}\n        >\n          Reopen Branch\n        </MenuItem>\n      )}\n    </Menu>\n  )\n}\n","import { createUseStyles } from 'react-jss'\n\nexport const rowHeight = '1.5em'\nexport const rowGap = '.75em'\nconst columnGap = '.5em'\n\nconst nodeviewJSS = createUseStyles({\n  TruthTree: {\n    display: 'grid',\n    padding: '0.2em',\n    gridTemplateColumns:\n      '[rowNumber] auto [nodeView] auto [justification] auto',\n    placeItems: 'center',\n    columnGap,\n    rowGap,\n  },\n\n  RowNumber: {\n    gridColumn: 'rowNumber',\n  },\n\n  Justification: {\n    gridColumn: 'justification',\n    display: 'flex',\n    alignSelf: 'start',\n  },\n\n  NodeViewContainer: {\n    gridColumn: 'nodeView',\n  },\n\n  NodeView: {\n    display: 'grid',\n    textAlign: 'center',\n    columnGap,\n    rowGap,\n  },\n\n  FormulaBounder: {\n    display: 'grid',\n    borderRadius: '.2em',\n    borderWidth: '.1em',\n    borderStyle: 'solid',\n    rowGap,\n  },\n\n  Tooltip: {\n    fontSize: '3em',\n  },\n})\n\nexport default nodeviewJSS\n","import React, { ChangeEvent } from 'react'\nimport AutosizeInput from 'react-input-autosize'\nimport CSS from 'csstype'\n\ntype Props = {\n  onChange: (event: ChangeEvent<HTMLInputElement>) => void\n  value: string\n  placeholder: string\n  style?: CSS.Properties\n}\n\nfunction StyledAutosizeInput({ onChange, value, placeholder, style }: Props) {\n  return (\n    <AutosizeInput\n      style={style}\n      inputStyle={{\n        padding: '0vmin .5vmin',\n        backgroundColor: 'transparent',\n        borderStyle: 'none',\n      }}\n      onChange={onChange}\n      value={value}\n      placeholder={placeholder}\n    />\n  )\n}\n\nexport default StyledAutosizeInput\n","import React, { FC, useState, useRef, Ref } from 'react'\nimport { Check } from '@material-ui/icons'\nimport { CustomDispatch, updateFormula } from '../RudolfReducer'\nimport { NodeMenu } from './NodeMenu'\nimport { FormulaNode } from '../typings/TreeState'\nimport { rowHeight } from '../styles/NodeView_styles'\nimport StyledAutosizeInput from './StyledAutosizeInput'\n\ninterface Props {\n  row: number\n  value: string\n  resolved: boolean\n  node: FormulaNode\n  index: number\n  dispatch: CustomDispatch\n}\n\nconst FormulaView: FC<Props> = ({ index, dispatch, node }) => {\n  const formula = node.formulas[index]\n  const { value, resolved } = formula\n  const [contextMenu, setContextMenu] = useState(false) // Convert to reducer action/field w/ ref, node, optional index.\n  const ref: Ref<HTMLDivElement> = useRef(null)\n  return (\n    <div\n      style={{\n        height: rowHeight,\n        gridRow: index + 1,\n      }}\n      ref={ref}\n      onContextMenu={(e) => {\n        e.preventDefault()\n        setContextMenu(true)\n      }}\n    >\n      <StyledAutosizeInput\n        onChange={(event) => {\n          dispatch(updateFormula(node.id, index, event.currentTarget.value))\n        }}\n        value={value}\n        placeholder=\"formula\"\n      />\n      <NodeMenu\n        open={contextMenu}\n        onClose={() => setContextMenu(false)}\n        dispatch={dispatch}\n        anchorEl={ref.current as HTMLDivElement}\n        index={index}\n        node={node}\n      />\n      {resolved ? <Check /> : ''}\n    </div>\n  )\n}\n\nexport default FormulaView\n","import { withStyles, Tooltip } from '@material-ui/core'\n\nconst CustomTooltip = withStyles({ tooltip: { fontSize: 16 } })(Tooltip)\n\nexport default CustomTooltip\n","import React, { FC } from 'react'\nimport { ArcherElement } from 'react-archer'\n\nimport { CustomDispatch, updateContradiction } from '../RudolfReducer'\nimport { FeedbackMap } from '../typings/Checker'\nimport { JustificationMap, TreeNode } from '../typings/TreeState'\nimport { firstRow, isFormulaNode } from '../util/nodes'\nimport FormulaView from './FormulaView'\nimport nodeviewJSS, { rowHeight } from '../styles/NodeView_styles'\nimport StyledAutosizeInput from './StyledAutosizeInput'\nimport CustomTooltip from './CustomTooltip'\nimport feedbackJSS from '../styles/feedback_styles'\n\ntype Props = {\n  node: TreeNode\n  dispatch: CustomDispatch\n  justifications: JustificationMap\n  feedbackMap?: FeedbackMap\n  nextRow: number\n}\n\n// TODO: allow context menu on nodes?\n\nconst NodeView: FC<Props> = ({\n  node,\n  dispatch,\n  justifications,\n  feedbackMap,\n  nextRow,\n  ...props\n}) => {\n  const classes = nodeviewJSS()\n  const feedbackClasses = feedbackJSS()\n  let feedbackInfo = ''\n  let feedbackClass = ''\n  if (feedbackMap) {\n    const feedback = feedbackMap[node.id]\n    if (feedback) {\n      feedbackInfo = feedback.info ?? ''\n      feedbackClass =\n        feedback.class === 'correct'\n          ? feedbackClasses.Correct\n          : feedbackClasses.Incorrect\n    }\n  }\n  if (isFormulaNode(node)) {\n    const { id, formulas, forest } = node\n    return (\n      <div\n        className={classes.NodeView}\n        style={{\n          gridTemplateRows: `repeat(${nextRow - firstRow(node)}, ${rowHeight})`,\n          gridTemplateColumns: `repeat(${forest.length}, auto)`,\n        }}\n      >\n        <div\n          style={{\n            gridRow: '1',\n            gridColumn: `1 / span ${forest.length}`,\n          }}\n        >\n          <CustomTooltip title={feedbackInfo}>\n            <div>\n              <ArcherElement\n                id={id}\n                relations={forest.map((child) => {\n                  return {\n                    targetId: child.id,\n                    targetAnchor: 'top',\n                    sourceAnchor: 'bottom',\n                  }\n                })}\n              >\n                <div\n                  className={`${classes.FormulaBounder} ${feedbackClass} `}\n                  {...props}\n                >\n                  {formulas.map((form, index) => {\n                    return (\n                      <FormulaView\n                        key={`${form}-${index}`}\n                        node={node}\n                        index={index}\n                        dispatch={dispatch}\n                        {...form}\n                      />\n                    )\n                  })}\n                </div>\n              </ArcherElement>\n            </div>\n          </CustomTooltip>\n        </div>\n\n        {forest.map((child, index) => {\n          return (\n            <div\n              key={child.id}\n              style={{\n                gridColumn: `${index} / span 1`,\n                gridRow: child.formulas[0]\n                  ? `${child.formulas[0].row - firstRow(node) + 1}`\n                  : 2,\n              }}\n            >\n              <NodeView\n                {...{\n                  node: child,\n                  dispatch,\n                  justifications,\n                  nextRow,\n                  feedbackMap,\n                }}\n              />\n            </div>\n          )\n        })}\n      </div>\n    )\n  } else if (node.nodeType === 'contradiction') {\n    return (\n      <CustomTooltip title={feedbackInfo}>\n        <div>\n          <ArcherElement id={node.id}>\n            <div\n              className={`closed-branch-marker node ${feedbackClass}`}\n              {...props}\n            >\n              X\n              <StyledAutosizeInput\n                onChange={({ currentTarget: { value } }) =>\n                  dispatch(updateContradiction(node.id, value))\n                }\n                value={node.contradictoryRows}\n                placeholder=\"rows\"\n              />\n            </div>\n          </ArcherElement>\n        </div>\n      </CustomTooltip>\n    )\n  } else if (node.nodeType === 'finished') {\n    return (\n      <CustomTooltip title={feedbackInfo}>\n        <div>\n          <ArcherElement id={node.id}>\n            <div\n              className={`finished-branch-marker ${feedbackClass}`}\n              {...props}\n            >\n              ↓\n            </div>\n          </ArcherElement>\n        </div>\n      </CustomTooltip>\n    )\n  } else {\n    throw new Error(\n      `Invariant violation: Invalid nodeType on node: ${JSON.stringify(node)}`\n    )\n  }\n}\n\nexport default NodeView\n","import React from 'react'\nimport NodeView from './NodeView'\nimport {\n  RudolfStore,\n  CustomDispatch,\n  updateJustification,\n} from '../RudolfReducer'\nimport nodeviewJSS, { rowHeight } from '../styles/NodeView_styles'\nimport { range } from '../util/helpers'\nimport StyledAutosizeInput from './StyledAutosizeInput'\nimport CustomTooltip from './CustomTooltip'\nimport { CheckerFeedback } from '../typings/Checker'\n\ntype Props = {\n  treeState: RudolfStore\n  dispatch: CustomDispatch\n  feedback: CheckerFeedback\n}\n\nconst TruthTree = ({ treeState, dispatch, feedback }: Props) => {\n  const classes = nodeviewJSS()\n  const { nextRow, tree, justifications } = treeState\n  const rows = range(1, nextRow)\n  return (\n    <CustomTooltip title={!feedback.success ? feedback.errorMessage : ''}>\n      <div\n        className={classes.TruthTree}\n        style={{\n          gridTemplateRows: `repeat(${nextRow - 1}, ${rowHeight})`,\n        }}\n      >\n        {rows.map((row) => {\n          return (\n            <div\n              className={classes.RowNumber}\n              key={row}\n              style={{ gridRow: row }}\n            >\n              {`${row}.`}\n            </div>\n          )\n        })}\n        <div\n          className={classes.NodeViewContainer}\n          style={{\n            gridRow: `1 / span ${rows.length}`,\n          }}\n        >\n          <NodeView\n            node={tree}\n            dispatch={dispatch}\n            justifications={justifications}\n            feedbackMap={feedback.success ? feedback.feedback : undefined}\n            nextRow={nextRow}\n          />\n        </div>\n        {Object.keys(justifications).map((rowString) => {\n          const row = Number(rowString)\n          const { parentRow, rule } = justifications[row]\n          return (\n            <div\n              className={classes.Justification}\n              key={row}\n              style={{ gridRow: row }}\n            >\n              <StyledAutosizeInput\n                style={{ marginRight: '.1em' }}\n                onChange={({ currentTarget: { value: parentRow } }) =>\n                  dispatch(updateJustification(row, { parentRow }))\n                }\n                value={parentRow}\n                placeholder=\"row\"\n              />\n              <StyledAutosizeInput\n                onChange={({ currentTarget: { value: rule } }) =>\n                  dispatch(updateJustification(row, { rule }))\n                }\n                value={rule}\n                placeholder=\"rule\"\n              />\n            </div>\n          )\n        })}\n      </div>\n    </CustomTooltip>\n  )\n}\n\nexport default TruthTree\n","export const isEmptyArray = <T>(\n  maybeArray: Array<T> | string\n): maybeArray is [] => Array.isArray(maybeArray) && maybeArray.length === 0\n\nexport const lastEl = <T>(arr: T[]) => arr[arr.length - 1]\n\n/**\n * @param start start of array (inclusive)\n * @param stop end of array (exclusive)\n * @returns Array of integers from start to stop.\n * if start >= stop, returns empty array\n */\nexport const range = (start: number, stop: number): number[] => {\n  if (start < stop) {\n    return [start, ...range(start + 1, stop)]\n  } else {\n    return []\n  }\n}\n","import { TextareaAutosize } from '@material-ui/core'\nimport React, { FC, useState } from 'react'\nimport { createUseStyles } from 'react-jss'\n\nimport { RudolfStore } from '../RudolfReducer'\nimport { CheckerFeedback } from '../typings/Checker'\n\nconst jsonviewJSS = createUseStyles({\n  Bounder: {\n    minWidth: '100%',\n    position: '',\n    bottom: 0,\n    display: 'flex',\n    flexDirection: 'column',\n    zIndex: 10,\n  },\n\n  TextArea: {\n    overflow: 'scroll',\n    fontSize: '16px',\n  },\n\n  Toggle: {\n    backgroundColor: 'black',\n    color: 'white',\n    fontSize: '13px',\n    alignSelf: 'flex-end',\n    '&:hover': {\n      cursor: 'pointer',\n    },\n    padding: '2px 10px',\n  },\n})\n\ntype Props = RudolfStore & { feedback: CheckerFeedback }\n\nexport const DebugInfo: FC<Props> = ({ tree, justifications, feedback }) => {\n  const classes = jsonviewJSS()\n  const [open, setOpen] = useState(false)\n  return (\n    <div className={classes.Bounder}>\n      <div\n        className={classes.Toggle}\n        onClick={() => {\n          setOpen(!open)\n        }}\n      >\n        {open ? 'hide' : 'show debug info'}\n      </div>\n      <TextareaAutosize\n        className={classes.TextArea}\n        value={JSON.stringify({ tree, justifications, ...feedback }, null, 1)}\n        rowsMax={open ? 10 : 1}\n        style={{ maxHeight: open ? '' : '0' }}\n      />\n    </div>\n  )\n}\n","import '../styles/all.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport { IconButton } from '@material-ui/core'\nimport { Redo, Undo } from '@material-ui/icons'\nimport React, { useEffect, useReducer, useRef, useState } from 'react'\nimport { ArcherContainer } from 'react-archer'\n\nimport { createTree, initialState, rudolfReducer } from '../RudolfReducer'\nimport appJSS from '../styles/App_styles'\nimport feedbackJSS from '../styles/feedback_styles'\nimport { makeUndoable } from '../undoableReducer'\nimport { checkTree } from '../util/carnapAdapter'\nimport PremiseInput from './PremiseInput'\nimport RudolfFeedback from './RudolfFeedback'\nimport TruthTree from './TruthTree'\nimport { Checker, CheckerFeedback } from '../typings/Checker'\nimport { DebugInfo } from './DebugInfo'\n\ntype Props = {\n  initialPremises?: string\n  checker: string | Checker\n  debug?: boolean\n}\n\nconst Rudolf: React.FC<Props> = ({\n  initialPremises = '',\n  checker,\n  debug = false,\n}): JSX.Element => {\n  const [premises, setPremises] = useState(initialPremises)\n  const [feedback, setFeedback] = useState<CheckerFeedback>({\n    success: true,\n    feedback: {},\n    sequent: { label: premises, forest: [], rule: '' },\n  })\n  const [[pastStates, treeState, futureStates], dispatch] = useReducer(\n    ...makeUndoable(rudolfReducer, initialState(premises))\n  )\n\n  const handleSubmitPremises = (rawInput: string) => {\n    setPremises(rawInput)\n    const premiseArray = rawInput.split(',')\n    dispatch(createTree(premiseArray))\n  }\n\n  const { tree, justifications } = treeState\n\n  const checkerFunction =\n    typeof checker === 'function' ? checker : window.Carnap?.[checker]\n\n  useEffect((): void => {\n    if (typeof checkerFunction === 'function') {\n      checkTree(tree, justifications, checkerFunction)\n        .then(({ feedback, sequent }) =>\n          setFeedback({ success: true, sequent, feedback })\n        )\n        .catch(({ message }: Error) =>\n          setFeedback({ success: false, errorMessage: message })\n        )\n    } else if (window.Carnap) {\n      console.error(\n        `The name ${checker} is not defined as a function on the Carnap object. ${Carnap}`\n      )\n    } else {\n      console.warn(\n        'The Carnap global variable is not defined or does not contain an object. Skipping Check.'\n      )\n    }\n  }, [tree, justifications, checker, checkerFunction])\n\n  const classes = appJSS()\n  const feedbackClasses = feedbackJSS()\n  const topItemsRef = useRef<HTMLDivElement>(null)\n  return (\n    <main className={classes.AppBounder}>\n      <div className={classes.TopItemsBounder} ref={topItemsRef}>\n        {/* <PremisesSelector onChange={handleSubmitPremises} /> */}\n        <PremiseInput\n          premises={premises}\n          onSubmit={handleSubmitPremises}\n          setPremises={setPremises}\n        />\n        <RudolfFeedback treeState={treeState} />\n        <span className=\"tree-buttons\">\n          <IconButton\n            aria-label=\"Undo\"\n            className=\"undo-button\"\n            onClick={() => {\n              dispatch({ type: 'UNDO' })\n            }}\n            disabled={!pastStates.length}\n          >\n            <Undo />\n          </IconButton>\n          <IconButton\n            aria-label=\"Redo\"\n            className=\"redo-button\"\n            onClick={() => {\n              dispatch({ type: 'REDO' })\n            }}\n            disabled={!futureStates.length}\n          >\n            <Redo />\n          </IconButton>\n        </span>\n      </div>\n      <div\n        className={`${classes.TreeBounder} ${\n          feedback.success ? '' : feedbackClasses.Incorrect\n        }`}\n      >\n        <ArcherContainer\n          arrowLength={0}\n          style={{ zIndex: 1 }}\n          svgContainerStyle={{ zIndex: -1 }}\n          strokeColor=\"black\"\n          noCurves={false}\n        >\n          <TruthTree {...{ treeState, dispatch, feedback }} />\n        </ArcherContainer>\n      </div>\n      {debug && <DebugInfo {...{ ...treeState, feedback }} />}\n    </main>\n  )\n}\n\nexport default Rudolf\n","import { Reducer } from 'react'\n\ntype TrackedChanges<S> = [S[], S, S[]]\n\nexport const makeUndoable = <S, A extends { type: string }>(\n  innerReducer: Reducer<S, A>,\n  initialState: S\n): [\n  Reducer<TrackedChanges<S>, A | { type: 'UNDO' } | { type: 'REDO' }>,\n  TrackedChanges<S>\n] => [\n  (\n    [past, present, future]: [S[], S, S[]],\n    action: A | { type: 'UNDO' } | { type: 'REDO' }\n  ) => {\n    switch (action.type) {\n      case 'UNDO':\n        const [previous, ...ancientHistory] = past\n        return [ancientHistory, previous, [present, ...future]]\n      case 'REDO':\n        const [next, ...distantFuture] = future\n        return [[present, ...past], next, distantFuture]\n      default:\n        return [[present, ...past], innerReducer(present, action as A), []]\n    }\n  },\n  [[], initialState, []],\n]\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import { createTrees, WidgetProps } from './lib'\nimport * as serviceWorker from './serviceWorker'\n\n// This set-up is done manually in the Rudolf demo page\n// In a Carnap book chapter, this code is generated by a pandoc filter\nconst trees: WidgetProps[] = [\n  {\n    elementId: 'problem-1.1',\n    initialPremises: 'P->Q,P,~Q',\n    checker: 'checkIchikawaJenkinsSLTableau',\n    debug: true,\n  },\n  {\n    elementId: 'problem-1.2',\n    checker: 'checkIchikawaJenkinsSLTableau',\n    initialPremises: '',\n    debug: true,\n  },\n  {\n    elementId: 'problem-1.3',\n    checker: 'checkIchikawaJenkinsQLTableau',\n    initialPremises: 'Ax(Px->Qx),~Qa,~~Pa',\n    debug: true,\n  },\n]\n\ncreateTrees(trees)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport Rudolf from './components/Rudolf'\nimport { Checker } from './typings/Checker'\n\nexport type WidgetProps = {\n  elementId: string\n  initialPremises: string\n  checker?: string\n  debug?: boolean\n}\n\n// TODO, update this to use object with named arguments. This is silly.\nexport const createTree = (\n  elementId: string,\n  initialPremises: string,\n  checker: Checker | string = 'checkIchikawaJenkinsSLTableau',\n  debug = false\n) => {\n  ReactDOM.render(\n    React.createElement(Rudolf, { initialPremises, checker, debug }),\n    document.getElementById(elementId)\n  )\n}\n\nexport const createTrees = (props: WidgetProps[]) => {\n  props.forEach(\n    ({\n      elementId,\n      initialPremises,\n      checker = 'checkIchikawaJenkinsSLTableau',\n      debug = false,\n    }) => {\n      createTree(elementId, initialPremises, checker, debug)\n    }\n  )\n}\n"],"sourceRoot":""}